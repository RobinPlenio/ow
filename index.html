<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ottmar Wuselkrug</title>
  <meta name="description" content="Biografie und Porträt von Ottmar Wuselkrug." />
  <meta name="theme-color" content="#0b0b0b" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta property="og:title" content="Ottmar Wuselkrug" />
  <meta property="og:site_name" content="ottmarwuselkrug.de" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Biografie und Porträt von Ottmar Wuselkrug." />
  <meta property="og:image" content="assets/OW_1.png" />
  <link rel="icon" href="/favicon.ico" />
  <style>
    /* Variation D — minimal, playful **separator line** between bio and image */
    :root {
      --bg: #ffffff;
      --fg: #0a0a0a;
      --muted: #6b7280;
      --hair: #e5e7eb;
      --acc: #111827;       /* randomized in JS */
      --radius: 24px;
      --maxw: 1500px;
      --inset: clamp(12px, 3vw, 48px);
      --sep: color-mix(in oklab, var(--fg) 14%, transparent); /* thin line color */
    }
    @media (prefers-color-scheme: dark) {
      :root { --bg:#0b0b0b; --fg:#f4f4f5; --muted:#a1a1aa; --hair:#1f2937; --sep: rgba(255,255,255,.22); }
    }

    html, body { height: 100%; }
    body {
      margin: 0; color: var(--fg); background: var(--bg);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility;
      font: 400 clamp(16px, 1.05vw + .6rem, 20px)/1.55 ui-sans-serif, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    main { position: relative; min-height: 100svh; display: grid; place-items: center; padding: var(--inset); }

    .frame {
      width: min(100%, var(--maxw));
      min-height: clamp(560px, 94svh, 1200px);
      display: grid; gap: clamp(12px, 2.6vw, 36px);
      grid-template-columns: 64px minmax(300px, 520px) 1px 1fr; /* rail | text | divider | image */
      align-items: start;
    }

    .rail { position: sticky; top: var(--inset); height: fit-content; background: var(--acc); color: #fff;
      border-radius: 999px; display: grid; place-items: center; padding: 8px 0;
      writing-mode: vertical-rl; text-orientation: mixed; transform: rotate(180deg);
      font-size: 11px; letter-spacing: .18em; text-transform: uppercase;
      box-shadow: 0 0 0 6px color-mix(in oklab, var(--acc) 16%, transparent);
    }

    .copy { padding-top: clamp(4px, 1vw, 12px); }
    .caption { margin: 0 0 10px 0; font-size: 12px; letter-spacing: .08em; color: var(--muted); text-transform: uppercase; }

    .bio { margin: 0; max-width: 38ch; font-size: clamp(20px, 1.15vw + 1rem, 32px); letter-spacing: -.01em; line-height: 1.48;
      text-wrap: balance; hyphens: auto; hanging-punctuation: first; animation: up .45s ease both; }

    /* ——— playful, minimal separator ——— */
    .divider { position: relative; align-self: stretch; width: 1px; background: var(--sep); border-radius: 999px; }
    .divider::after {
      content: ""; position: absolute; left: 50%; transform: translate(-50%, -50%);
      top: var(--dot-y, 42%);
      width: 6px; height: 6px; border-radius: 999px; background: var(--acc);
      box-shadow: 0 0 0 4px color-mix(in oklab, var(--acc) 12%, transparent);
      opacity: .9; pointer-events: none;
    }

    .visual { position: relative; border: 1px solid var(--hair); border-radius: var(--radius); overflow: clip; }
    .portrait { width: 100%; height: 100%; object-fit: cover; animation: reveal .9s cubic-bezier(.2,.7,.1,1) both; }

    /* hide the image until the chosen src is preloaded to avoid a flash */
    .portrait.is-loading { opacity: 0; }

    .brand { position: fixed; right: 12px; bottom: 12px; color: var(--muted); font-size: 12px; letter-spacing: .06em; }

    @keyframes up { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: none; } }
    @keyframes reveal { from { clip-path: inset(6% round var(--radius)); opacity:.0; } to { clip-path: inset(0 round var(--radius)); opacity:1; } }

    @media (prefers-reduced-motion: reduce) { .bio, .portrait { animation: none; } }

    @media (max-width: 1000px) {
      .frame { grid-template-columns: 1fr; }
      .rail { position: static; writing-mode: horizontal-tb; transform:none; width: max-content; border-radius: 999px; padding: 6px 10px; box-shadow: none; margin-bottom: 6px; }
      .divider { display: none; }
      .visual { order: 2; }
      .portrait { aspect-ratio: 1 / 1; height: auto; }
      .brand { position: static; text-align: center; padding-top: 10px; }
    }
  </style>
</head>
<body>
  <main>
    <div class="frame">
      <aside class="rail" aria-hidden="true">ottmarwuselkrug.de</aside>
      <section class="copy">
        <p class="caption">Biografie</p>
        <p class="bio" id="bio">Lade Biografie …</p>
      </section>
      <div class="divider" id="divider" aria-hidden="true"></div>
      <section class="visual">
        <img alt="Porträt von Ottmar Wuselkrug" class="portrait is-loading" id="portrait" fetchpriority="high" />
      </section>
    </div>
  </main>
  <div class="brand" aria-hidden="true">Ottmar Wuselkrug</div>

  <script>
    // Manifests override these arrays if present at the repo root.
    const BIOS = [
      "Ottmar Wuselkrug ist freier Kurator und Publizist mit Fokus auf dokumentarische Positionen und kleine Formen.",
      "Ottmar Wuselkrug (*1970 in Karl-Marx-Stadt) ist DJ für private Anlässe und Autor kürzerer Sachtexte."
    ];

    const IMAGES = [
      'assets/OW_1.png','assets/OW_2.png','assets/OW_3.png','assets/OW_4.png','assets/OW_5.png','assets/OW_6.png','assets/OW_7.png'
    ];

    const ACCENTS = ['#111827','#0ea5e9','#10b981','#f43f5e','#8b5cf6','#f59e0b'];

    const bioEl = document.getElementById('bio');
    const imgEl = document.getElementById('portrait');
    const divider = document.getElementById('divider');

    function pickIndex(key, len) {
      const last = Number(sessionStorage.getItem(key) ?? -1);
      if (len <= 1) return 0;
      let i = Math.floor(Math.random() * len);
      if (i === last) i = (i + 1) % len;
      sessionStorage.setItem(key, i);
      return i;
    }

    function setBio(text) {
      bioEl.textContent = text;
      const desc = document.querySelector('meta[name="description"]');
      if (desc) desc.setAttribute('content', text.slice(0, 160));
      const og = document.querySelector('meta[property="og:description"]');
      if (og) og.setAttribute('content', text.slice(0, 200));
      document.title = 'O.W. ';
    }

    async function setImage(url) {
      const img = document.getElementById('portrait');
      if (!img) return;
      img.classList.add('is-loading');

      // Preload to avoid showing any default image
      const pre = new Image();
      pre.fetchPriority = 'high';
      pre.decoding = 'async';
      const loaded = new Promise((res, rej) => { pre.onload = res; pre.onerror = rej; });
      pre.src = url;
      try { await loaded; } catch (_) {}

      img.src = url;
      img.classList.remove('is-loading');

      const ogImg = document.querySelector('meta[property="og:image"]');
      if (ogImg) ogImg.setAttribute('content', url);
    }

    async function loadJSON(path) {
      try { const res = await fetch(path, { cache: 'no-store' }); if (!res.ok) return null; const arr = await res.json(); return Array.isArray(arr) ? arr.filter(Boolean) : null; } catch { return null; }
    }

    function setAccent() {
      const i = pickIndex('accIdx', ACCENTS.length);
      const acc = ACCENTS[i];
      document.documentElement.style.setProperty('--acc', acc);
      const theme = document.querySelector('meta[name="theme-color"][media*="light"]');
      if (theme) theme.setAttribute('content', acc);
    }

    function placeDot() {
      // per-visit playful dot along the divider
      const y = Math.round(18 + Math.random()*64) + '%';
      divider && divider.style.setProperty('--dot-y', y);
    }

    (async function init() {
      setAccent();
      placeDot();
      const [biosMaybe, imgsMaybe] = await Promise.all([
        loadJSON('bios.json'),
        loadJSON('images.json')
      ]);
      const bios = biosMaybe || BIOS;
      const imgs = imgsMaybe || IMAGES;

      const bi = pickIndex('lastBioIdx', bios.length);
      const ii = pickIndex('lastImgIdx', imgs.length);

      setBio(bios[bi]);
      setImage(imgs[ii]);
    })();
  </script>
</body>
</html>
