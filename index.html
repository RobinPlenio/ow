<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ottmar Wuselkrug</title>
  <meta name="description" content="Biografie und Porträt von Ottmar Wuselkrug." />
  <meta name="theme-color" content="#0b0b0b" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta property="og:title" content="Ottmar Wuselkrug" />
  <meta property="og:site_name" content="ottmarwuselkrug.de" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Biografie und Porträt von Ottmar Wuselkrug." />
  <meta property="og:image" content="assets/OW_1.png" />
  <link rel="icon" href="/favicon.ico" />
  <style>
    /* Back to the earlier vibe — playful, minimal, split layout */
    :root {
      --bg: #0b0b0b;
      --fg: #f4f4f5;
      --muted: #a1a1aa;
      --hair: #1f2937;
      --acc: #8b5cf6;     /* randomized in JS */
      --radius: 24px;
      --maxw: 1500px;
      --inset: clamp(12px, 3vw, 48px);
    }

    @media (prefers-color-scheme: light) {
      :root { --bg:#ffffff; --fg:#0a0a0a; --muted:#6b7280; --hair:#e5e7eb; }
    }

    html, body { height: 100%; }
    body {
      margin: 0; color: var(--fg);
      background:
        radial-gradient(900px 600px at 96% 6%, color-mix(in oklab, var(--acc) 4%, transparent), transparent),
        radial-gradient(700px 460px at 8% 12%, color-mix(in oklab, var(--acc) 6%, transparent), transparent),
        var(--bg);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility;
      font: 400 clamp(16px, 1.05vw + .6rem, 20px)/1.55 ui-sans-serif, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    main { position: relative; min-height: 100svh; display: grid; place-items: center; padding: var(--inset); }

    .stage {
      width: min(100%, var(--maxw));
      min-height: clamp(560px, 94svh, 1200px);
      display: grid; gap: clamp(16px, 3vw, 48px);
      grid-template-columns: minmax(300px, 520px) 1fr; /* text | image */
      align-items: start;
    }

    .text { padding-top: clamp(6px, 1vw, 14px); }
    .kicker { font-size: 12px; letter-spacing: .14em; text-transform: uppercase; color: var(--muted); margin: 0 0 12px 0; }
    .kicker::after { content: ""; display: block; height: 2px; width: var(--rule, 64px); background: var(--acc); border-radius: 2px; margin-top: 10px; }

    .bio { margin: 0; max-width: 36ch; font-size: clamp(20px, 1.15vw + 1rem, 32px); letter-spacing: -.01em; line-height: 1.5;
      text-wrap: balance; hyphens: auto; hanging-punctuation: first; animation: up .45s ease both; }

    .visual { position: relative; border: 1px solid var(--hair); border-radius: var(--radius); overflow: clip; transform: scale(var(--imgScale, .8)); transform-origin: top right; }
    .portrait { width: 100%; height: 100%; object-fit: cover; animation: reveal .9s cubic-bezier(.2,.7,.1,1) both; }
    .portrait.is-loading { opacity: 0; }

    .brand { position: fixed; right: 12px; bottom: 12px; color: var(--muted); font-size: 12px; letter-spacing: .06em; text-decoration: none; outline-offset: 2px; }
    .brand:hover { text-decoration: underline; text-decoration-color: var(--acc); }
    .brand:focus-visible { outline: 2px solid var(--acc); border-radius: 6px; }

    @keyframes up { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: none; } }
    @keyframes reveal { from { clip-path: inset(6% round var(--radius)); opacity:.0; } to { clip-path: inset(0 round var(--radius)); opacity:1; } }

    @media (prefers-reduced-motion: reduce) { .bio, .portrait { animation: none; } }

    @media (max-width: 900px) {
      .stage { grid-template-columns: 1fr; }
      .visual { order: 2; transform: none; }
      .portrait { aspect-ratio: 1 / 1; height: auto; }
      .brand { position: static; text-align: center; padding-top: 10px; }
    }
  </style>
</head>
<body>
  <main>
    <div class="stage" id="stage">
      <section class="text">
        <p class="kicker">ottmarwuselkrug.de</p>
        <p id="bio" class="bio">Lade Biografie …</p>
      </section>
      <section class="visual">
        <img alt="Porträt von Ottmar Wuselkrug" class="portrait is-loading" id="portrait" fetchpriority="high" />
      </section>
    </div>
  </main>
  <a class="brand" href="mailto:ottmar@ottmarwuselkrug.de" aria-label="E‑Mail an Ottmar Wuselkrug" title="E‑Mail an Ottmar Wuselkrug">ottmar@ottmarwuselkrug.de</a>

  <script>
    // Fallback content (overridden by bios.json / images.json if present)
    const BIOS = [
      "Ottmar Wuselkrug ist freier Kurator und Publizist mit Fokus auf dokumentarische Positionen und kleine Formen.",
      "Ottmar Wuselkrug (*1970 in Karl-Marx-Stadt) ist DJ für private Anlässe und Autor kürzerer Sachtexte."
    ];

    const IMAGES = [
      'assets/OW_1.png','assets/OW_2.png','assets/OW_3.png','assets/OW_4.png','assets/OW_5.png','assets/OW_6.png','assets/OW_7.png'
    ];

    const ACCENTS = ['#ff3e00','#0ea5e9','#10b981','#f43f5e','#8b5cf6','#f59e0b'];

    const bioEl = document.getElementById('bio');

    function pickIndex(key, len) {
      const last = Number(sessionStorage.getItem(key) ?? -1);
      if (len <= 1) return 0;
      let i = Math.floor(Math.random() * len);
      if (i === last) i = (i + 1) % len;
      sessionStorage.setItem(key, i);
      return i;
    }

    function setBio(text) {
      bioEl.textContent = text;
      const desc = document.querySelector('meta[name="description"]');
      if (desc) desc.setAttribute('content', text.slice(0, 160));
      const og = document.querySelector('meta[property="og:description"]');
      if (og) og.setAttribute('content', text.slice(0, 200));
      document.title = 'Ottmar Wuselkrug';
    }

    async function setImage(url) {
      const img = document.getElementById('portrait');
      if (!img) return;
      img.classList.add('is-loading');

      // Preload to avoid showing any default image
      const pre = new Image();
      pre.fetchPriority = 'high';
      pre.decoding = 'async';
      const loaded = new Promise((res, rej) => { pre.onload = res; pre.onerror = rej; });
      pre.src = url;
      try { await loaded; } catch (_) {}

      img.src = url;
      img.classList.remove('is-loading');

      const ogImg = document.querySelector('meta[property="og:image"]');
      if (ogImg) ogImg.setAttribute('content', url);
    }

    async function loadJSON(path) {
      try { const res = await fetch(path, { cache: 'no-store' }); if (!res.ok) return null; const arr = await res.json(); return Array.isArray(arr) ? arr.filter(Boolean) : null; } catch { return null; }
    }

    function setAccent() {
      const i = pickIndex('accIdx', ACCENTS.length);
      const acc = ACCENTS[i];
      document.documentElement.style.setProperty('--acc', acc);
      const rule = Math.round(48 + Math.random() * 64) + 'px';
      document.documentElement.style.setProperty('--rule', rule);
      const theme = document.querySelector('meta[name="theme-color"][media*="light"]');
      if (theme) theme.setAttribute('content', acc);
    }

    (async function init() {
      setAccent();
      const [biosMaybe, imgsMaybe] = await Promise.all([
        loadJSON('bios.json'),
        loadJSON('images.json')
      ]);
      const bios = biosMaybe || BIOS;
      const imgs = imgsMaybe || IMAGES;

      const bi = pickIndex('lastBioIdx', bios.length);
      const ii = pickIndex('lastImgIdx', imgs.length);

      setBio(bios[bi]);
      setImage(imgs[ii]);
    })();
  </script>
</body>
</html>
