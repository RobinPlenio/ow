<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ottmar Wuselkrug</title>
  <meta name="description" content="Biografie und Porträt von Ottmar Wuselkrug." />
  <meta name="theme-color" content="#0b0b0b" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta property="og:title" content="Ottmar Wuselkrug" />
  <meta property="og:site_name" content="ottmarwuselkrug.de" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Biografie und Porträt von Ottmar Wuselkrug." />
  <meta property="og:image" content="assets/OW_1.png" />
  <link rel="icon" href="/favicon.ico" />
  <style>
    /* Stylish, hip, playful + minimal */
    :root {
      --bg: #ffffff;
      --fg: #0a0a0a;
      --muted: #6b7280;      /* gray-500 */
      --hairline: #e5e7eb;   /* gray-200 */
      --acc: #111827;        /* gets randomized in JS */
      --radius: 22px;
      --maxw: 1440px;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b0b0b;
        --fg: #f4f4f5;
        --muted: #a1a1aa;    /* zinc-400 */
        --hairline: #1f2937; /* gray-800 */
      }
    }

    html, body { height: 100%; }
    body {
      margin: 0; color: var(--fg);
      background:
        radial-gradient(700px 460px at 8% 12%, color-mix(in oklab, var(--acc) 6%, transparent), transparent),
        radial-gradient(900px 600px at 98% 6%, color-mix(in oklab, var(--acc) 4%, transparent), transparent),
        var(--bg);
      font: 400 clamp(16px, 1.05vw + .6rem, 20px)/1.55 ui-sans-serif, -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility;
    }

    main { min-height: 100svh; display: grid; place-items: center; padding: clamp(14px, 3vw, 48px); }

    .stage {
      width: min(100%, var(--maxw));
      min-height: clamp(560px, 94svh, 1200px);
      display: grid; gap: clamp(16px, 3vw, 48px);
      grid-template-columns: minmax(280px, 520px) 1fr; /* text left, visual right */
      align-items: start;
    }

    .text { padding-top: clamp(6px, 1vw, 14px); }
    .kicker { font-size: 12px; letter-spacing: .14em; text-transform: uppercase; color: var(--muted); margin: 0 0 10px 0; }
    .kicker::after { content: ""; display: block; height: 2px; width: var(--rule, 64px); background: var(--acc); border-radius: 2px; margin-top: 10px; }

    .bio {
      font-size: clamp(18px, 1.1vw + 1rem, 28px);
      letter-spacing: -0.01em; line-height: 1.5; margin: 0;
      max-width: 36ch; text-wrap: balance; hyphens: auto; hanging-punctuation: first;
      animation: fadeUp .5s ease both;
    }

    .visual { position: relative; border-left: 1px solid var(--hairline); overflow: clip; border-radius: var(--radius); }

    .portrait {
      width: 100%; height: 100%; display: block; object-fit: cover;
      transform-origin: 50% 50%; will-change: transform; /* for playful parallax */
      animation: fadeIn .7s ease both;
    }

    .sticker { position: absolute; top: 14px; right: 14px; width: 10px; height: 10px; border-radius: 999px; background: var(--acc); box-shadow: 0 0 0 6px color-mix(in oklab, var(--acc) 14%, transparent); opacity: .9; pointer-events: none; }

    .brand { position: fixed; right: 12px; bottom: 12px; color: var(--muted); font-size: 12px; letter-spacing: .06em; }

    @keyframes fadeUp { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: none; } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    @media (prefers-reduced-motion: reduce) {
      .bio, .portrait { animation: none; }
    }

    @media (max-width: 900px) {
      .stage { grid-template-columns: 1fr; }
      .visual { order: 2; border-left: none; border-radius: 18px; }
      .portrait { aspect-ratio: 1 / 1; height: auto; }
      .brand { position: static; text-align: center; padding-top: 10px; }
    }
  </style>
</head>
<body>
  <main>
    <div class="stage" id="stage">
      <section class="text">
        <p class="kicker">ottmarwuselkrug.de</p>
        <p id="bio" class="bio">Lade Biografie …</p>
      </section>
      <section class="visual" id="visual">
        <span class="sticker" aria-hidden="true"></span>
        <img src="assets/OW_1.png" alt="Porträt von Ottmar Wuselkrug" class="portrait" id="portrait" fetchpriority="high" />
      </section>
    </div>
  </main>
  <div class="brand" aria-hidden="true">Ottmar Wuselkrug</div>

  <script>
    // Content manifests override these arrays if present at the repo root.
    const BIOS = [
      "Ottmar Wuselkrug ist freier Kurator und Publizist mit Fokus auf dokumentarische Positionen und kleine Formen.",
      "Ottmar Wuselkrug (*1970 in Karl-Marx-Stadt) ist DJ für private Anlässe und Autor kürzerer Sachtexte."
    ];

    const IMAGES = [
      'assets/OW_1.png','assets/OW_2.png','assets/OW_3.png','assets/OW_4.png','assets/OW_5.png','assets/OW_6.png','assets/OW_7.png'
    ];

    const ACCENTS = ['#ff3e00','#0ea5e9','#10b981','#f43f5e','#8b5cf6','#f59e0b'];

    const bioEl = document.getElementById('bio');
    const imgEl = document.getElementById('portrait');
    const visual = document.getElementById('visual');

    function pickIndex(key, len) {
      const last = Number(sessionStorage.getItem(key) ?? -1);
      if (len <= 1) return 0;
      let i = Math.floor(Math.random() * len);
      if (i === last) i = (i + 1) % len;
      sessionStorage.setItem(key, i);
      return i;
    }

    function setBio(text) {
      bioEl.textContent = text;
      const desc = document.querySelector('meta[name="description"]');
      if (desc) desc.setAttribute('content', text.slice(0, 160));
      const og = document.querySelector('meta[property="og:description"]');
      if (og) og.setAttribute('content', text.slice(0, 200));
      document.title = 'Ottmar Wiseldi Waseldi Wuselkrug';
    }

    function setImage(url) {
      imgEl.src = url;
      const ogImg = document.querySelector('meta[property="og:image"]');
      if (ogImg) ogImg.setAttribute('content', url);
    }

    async function loadJSON(path) {
      try { const res = await fetch(path, { cache: 'no-store' }); if (!res.ok) return null; const arr = await res.json(); return Array.isArray(arr) ? arr.filter(Boolean) : null; } catch { return null; }
    }

    function setAccent() {
      const i = pickIndex('accIdx', ACCENTS.length);
      const acc = ACCENTS[i];
      document.documentElement.style.setProperty('--acc', acc);
      // playful rule width & update theme-color for mobile UI tint
      const rule = Math.round(48 + Math.random() * 64) + 'px';
      document.documentElement.style.setProperty('--rule', rule);
      const theme = document.querySelector('meta[name="theme-color"][media*="light"]');
      if (theme) theme.setAttribute('content', acc);
    }

    function mountParallax() {
      if (matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      let raf = 0;
      visual.addEventListener('pointermove', (e) => {
        const r = visual.getBoundingClientRect();
        const px = (e.clientX - r.left) / r.width - 0.5;
        const py = (e.clientY - r.top) / r.height - 0.5;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          imgEl.style.transform = `translate3d(${px*6}px, ${py*6}px, 0) scale(1.01)`;
        });
      });
      visual.addEventListener('pointerleave', () => {
        imgEl.style.transform = 'translate3d(0,0,0)';
      });
    }

    (async function init() {
      setAccent();
      const [biosMaybe, imgsMaybe] = await Promise.all([
        loadJSON('bios.json'),
        loadJSON('images.json')
      ]);
      const bios = biosMaybe || BIOS;
      const imgs = imgsMaybe || IMAGES;

      const bi = pickIndex('lastBioIdx', bios.length);
      const ii = pickIndex('lastImgIdx', imgs.length);

      setBio(bios[bi]);
      setImage(imgs[ii]);
      mountParallax();
    })();
  </script>
</body>
</html>
